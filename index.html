<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gelişmiş Kedi Bulmaca Odası</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Courgette&family=Quicksand:wght@300;400;500;600;700&display=swap');
        
        :root {
            --primary-color: #d38c8c;
            --secondary-color: #8b5a5a;
            --accent-color: #ffc2c2;
            --dark-accent: #6b3e3e;
            --light-color: #fff5f5;
            --shadow-color: rgba(139, 90, 90, 0.3);
            --gold-color: #ffd700;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            margin: 0;
            padding: 0;
            font-family: 'Quicksand', sans-serif;
            background-color: #f9e8e8;
            overflow: hidden;
            height: 100vh;
            color: var(--secondary-color);
        }

        .room {
            width: 100%;
            height: 100%;
            background: linear-gradient(to bottom, #e6c3c3, #f0d9d9);
            position: relative;
            overflow: hidden;
            transition: all 0.5s ease;
        }

        .room::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: radial-gradient(circle at 50% 10%, rgba(255, 255, 200, 0.1), transparent 50%);
            pointer-events: none;
            z-index: 1;
        }

        .wall {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 70%;
            background: linear-gradient(to bottom, #efcaca, #e6c3c3);
            border-bottom: 4px solid #8b5a5a;
            z-index: 1;
        }

        .wall-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                repeating-linear-gradient(90deg, transparent, transparent 50px, rgba(139, 90, 90, 0.03) 50px, rgba(139, 90, 90, 0.03) 51px),
                repeating-linear-gradient(0deg, transparent, transparent 50px, rgba(139, 90, 90, 0.03) 50px, rgba(139, 90, 90, 0.03) 51px);
            z-index: 2;
        }

        .floor {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 30%;
            background: linear-gradient(to bottom, #8c6868, #7a5a5a);
            background-image: linear-gradient(90deg, rgba(0,0,0,0.1) 1px, transparent 1px), 
                              linear-gradient(rgba(0,0,0,0.1) 1px, transparent 1px);
            background-size: 40px 40px;
            z-index: 1;
        }

        .carpet {
            position: absolute;
            width: 60%;
            height: 50%;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            background: radial-gradient(ellipse at center, #bb7e7e, #9c6363);
            border-radius: 50% 50% 0 0;
            z-index: 2;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.2);
        }

        .carpet::after {
            content: '';
            position: absolute;
            width: 90%;
            height: 90%;
            top: 5%;
            left: 5%;
            border-radius: 50% 50% 0 0;
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .table {
            position: absolute;
            width: 220px;
            height: 120px;
            bottom: 30%;
            left: 50%;
            transform: translateX(-50%);
            background: linear-gradient(to bottom, #8c5b38, #6b4226);
            border-radius: 10px 10px 0 0;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 3;
        }

        .table::before {
            content: '';
            position: absolute;
            width: 90%;
            height: 10px;
            background: rgba(0, 0, 0, 0.1);
            top: -5px;
            left: 5%;
            border-radius: 10px;
        }

        .table::after {
            content: '';
            position: absolute;
            width: 180px;
            height: 20px;
            bottom: -20px;
            left: 20px;
            background: linear-gradient(to bottom, #573518, #4e2e16);
            border-radius: 0 0 10px 10px;
        }

        .table-leg {
            position: absolute;
            width: 20px;
            height: 100px;
            background: linear-gradient(to bottom, #573518, #4e2e16);
            bottom: -100px;
            z-index: 2;
        }

        .table-leg.left {
            left: 40px;
        }

        .table-leg.right {
            right: 40px;
        }

        .table-cloth {
            position: absolute;
            width: 140%;
            height: 60px;
            bottom: -30px;
            left: -20%;
            background: linear-gradient(to bottom, #d38c8c, #b77a7a);
            border-radius: 5px;
            z-index: 4;
            transform: rotate(-2deg);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }

        .vase {
            position: absolute;
            width: 80px;
            height: 120px;
            bottom: calc(30% + 120px);
            left: 50%;
            transform: translateX(-50%);
            background-image: url('vazo.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center bottom;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
            filter: drop-shadow(0 5px 10px rgba(0, 0, 0, 0.2));
        }

        .vase:hover {
            transform: translateX(-50%) scale(1.05);
            filter: drop-shadow(0 8px 15px rgba(0, 0, 0, 0.3)) brightness(1.1);
        }

        .vase::after {
            content: '';
            position: absolute;
            width: 100%;
            height: 30px;
            bottom: -10px;
            left: 0;
            background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.2), transparent 70%);
            z-index: -1;
            transform: scale(0.7, 0.3);
        }

        .flowers {
            position: absolute;
            width: 120px;
            height: 80px;
            bottom: 70px;
            left: 50%;
            transform: translateX(-50%);
            z-index: 9;
            opacity: 0;
            transition: opacity 1s ease;
        }

        .flower {
            position: absolute;
            width: 30px;
            height: 30px;
            background: radial-gradient(circle at center, #ff9999, #ff6666);
            border-radius: 50%;
            transform-origin: bottom center;
        }

        .flower:nth-child(1) { left: 40%; bottom: 40px; animation: sway 4s ease-in-out infinite; }
        .flower:nth-child(2) { left: 20%; bottom: 50px; animation: sway 4s ease-in-out infinite 0.5s; }
        .flower:nth-child(3) { left: 60%; bottom: 45px; animation: sway 4s ease-in-out infinite 1s; }
        .flower:nth-child(4) { left: 80%; bottom: 55px; animation: sway 4s ease-in-out infinite 1.5s; }
        .flower:nth-child(5) { left: 50%; bottom: 60px; animation: sway 4s ease-in-out infinite 2s; }

        .stem {
            position: absolute;
            width: 4px;
            height: 70px;
            background: linear-gradient(to bottom, #7cbe7c, #4e8e4e);
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            z-index: -1;
        }

        .cat {
            position: absolute;
            width: 120px;
            height: 100px;
            cursor: pointer;
            background-image: url('kedi.png');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center bottom;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            z-index: 8;
            opacity: 0;
            filter: brightness(0.7) contrast(0.9) blur(1px);
            transform-origin: bottom center;
        }

        .cat.visible {
            opacity: 0.8;
            filter: brightness(0.7) contrast(0.9) blur(0px);
            animation: breathe 4s infinite ease-in-out;
        }

        .cat.found {
            filter: brightness(1) contrast(1) saturate(1.2) blur(0px);
            animation: celebrate 0.5s ease-in-out, breathe 4s infinite ease-in-out 0.5s;
        }

        .cat-shadow {
            position: absolute;
            width: 80%;
            height: 20px;
            background: radial-gradient(ellipse at center, rgba(0, 0, 0, 0.3), transparent 70%);
            bottom: -10px;
            left: 10%;
            border-radius: 50%;
            transform: scale(1, 0.3);
            z-index: 7;
            opacity: 0;
            transition: opacity 0.5s ease;
        }

        .cat.visible + .cat-shadow,
        .cat.found + .cat-shadow {
            opacity: 0.7;
        }

        .cat-main {
            bottom: 30%;
            right: 20%;
            transform: scaleX(-1);
        }

        .cat-sleeping {
            bottom: calc(30% + 120px);
            left: 25%;
            transform: scale(0.8);
        }

        .cat-window {
            top: 20%;
            right: 15%;
            transform: scale(0.6);
        }

        .cat-jumping {
            bottom: 40%;
            left: 70%;
            transform: scale(0.7) rotate(-15deg);
        }

        .window {
            position: absolute;
            width: 160px;
            height: 220px;
            top: 15%;
            right: 15%;
            background: linear-gradient(to bottom, #a2d6ff, #c5e6ff);
            border: 10px solid #8b5a5a;
            box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.1), 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 3;
            overflow: hidden;
        }

        .window-frame {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            border: 6px solid #a36d6d;
            box-sizing: border-box;
            pointer-events: none;
            z-index: 4;
        }

        .window::after {
            content: '';
            position: absolute;
            width: 4px;
            height: 100%;
            left: 50%;
            top: 0;
            background: #8b5a5a;
            z-index: 4;
        }

        .window::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 4px;
            left: 0;
            top: 50%;
            background: #8b5a5a;
            z-index: 4;
        }

        .cloud {
            position: absolute;
            width: 60px;
            height: 30px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 20px;
            top: 20%;
            right: -60px;
            z-index: 2;
            animation: cloudMove 30s linear infinite;
        }

        .cloud::before, .cloud::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 30px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 50%;
        }

        .cloud::before {
            top: -15px;
            left: 10px;
        }

        .cloud::after {
            top: -10px;
            right: 10px;
        }

        .cloud:nth-child(2) {
            top: 50%;
            animation-delay: 5s;
        }

        .cloud:nth-child(3) {
            top: 30%;
            animation-delay: 12s;
        }

        .bookshelf {
            position: absolute;
            width: 120px;
            height: 200px;
            top: 25%;
            left: 10%;
            background: linear-gradient(to bottom, #8c5b38, #6b4226);
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            z-index: 3;
        }

        .shelf {
            position: absolute;
            width: 100%;
            height: 10px;
            background: #573518;
            left: 0;
        }

        .shelf:nth-child(1) { top: 50px; }
        .shelf:nth-child(2) { top: 100px; }
        .shelf:nth-child(3) { top: 150px; }

        .book {
            position: absolute;
            width: 15px;
            height: 40px;
            background: var(--primary-color);
            bottom: 150px;
        }
        
        .book:nth-child(4) { left: 10px; background: #d38c8c; height: 35px; }
        .book:nth-child(5) { left: 30px; background: #8b5a5a; height: 40px; }
        .book:nth-child(6) { left: 50px; background: #b77a7a; height: 38px; }
        .book:nth-child(7) { left: 70px; background: #d38c8c; height: 36px; }
        .book:nth-child(8) { left: 90px; background: #8b5a5a; height: 39px; }
        
        .book:nth-child(9) { bottom: 100px; left: 15px; background: #b77a7a; height: 35px; }
        .book:nth-child(10) { bottom: 100px; left: 35px; background: #d38c8c; height: 38px; }
        .book:nth-child(11) { bottom: 100px; left: 55px; background: #8b5a5a; height: 36px; }
        .book:nth-child(12) { bottom: 100px; left: 75px; background: #d38c8c; height: 40px; }

        .book:nth-child(13) { bottom: 50px; left: 10px; background: #8b5a5a; height: 37px; }
        .book:nth-child(14) { bottom: 50px; left: 30px; background: #d38c8c; height: 39px; }
        .book:nth-child(15) { bottom: 50px; left: 50px; background: #b77a7a; height: 34px; }
        .book:nth-child(16) { bottom: 50px; left: 70px; background: #8b5a5a; height: 38px; }
        .book:nth-child(17) { bottom: 50px; left: 90px; background: #d38c8c; height: 35px; }

        .picture-frame {
            position: absolute;
            width: 100px;
            height: 120px;
            top: 15%;
            left: 30%;
            background: #f0d9d9;
            border: 8px solid #8c5b38;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 3;
            transform: rotate(-5deg);
        }

        .picture-frame::after {
            content: '🐱';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 50px;
        }

        .lamp {
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: rgba(255, 255, 150, 0.3);
            top: 10%;
            left: 50%;
            transform: translateX(-50%);
            box-shadow: 0 0 30px 20px rgba(255, 255, 150, 0.3);
            cursor: pointer;
            z-index: 10;
            transition: all 0.5s ease;
        }

        .lamp-base {
            position: absolute;
            width: 40px;
            height: 10px;
            background: #8b5a5a;
            border-radius: 5px;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
        }

        .lamp-wire {
            position: absolute;
            width: 4px;
            height: 40px;
            background: #333;
            top: -50px;
            left: 50%;
            transform: translateX(-50%);
        }

        .puzzle-panel {
            position: absolute;
            top: 20px;
            left: 20px;
            width: 320px;
            font-size: 18px;
            color: var(--secondary-color);
            z-index: 100;
            background-color: rgba(255, 255, 255, 0.85);
            padding: 15px;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(5px);
            border: 2px solid var(--primary-color);
            transition: all 0.3s ease;
        }

        .puzzle-panel:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .puzzle-title {
            font-family: 'Courgette', cursive;
            font-size: 26px;
            font-weight: bold;
            margin-bottom: 10px;
            color: var(--dark-accent);
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        .puzzle-clue {
            margin-bottom: 15px;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.7);
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }

        #puzzle-task {
            font-weight: bold;
            margin-bottom: 15px;
            color: var(--dark-accent);
        }

        .progress-container {
            margin-top: 15px;
        }

        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .progress-bar {
            height: 15px;
            background-color: rgba(211, 140, 140, 0.3);
            border-radius: 10px;
            overflow: hidden;
            box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(to right, var(--primary-color), var(--accent-color));
            width: 0%;
            transition: width 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border-radius: 10px;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
        }

        .difficulty-selector {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }

        .difficulty-btn {
            padding: 5px 10px;
            background-color: rgba(211, 140, 140, 0.3);
            color: var(--secondary-color);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .difficulty-btn:hover {
            background-color: rgba(211, 140, 140, 0.5);
        }

        .difficulty-btn.active {
            background-color: var(--primary-color);
            color: white;
        }

        .message {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            font-size: 24px;
            color: var(--secondary-color);
            background-color: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 100;
            display: none;
            text-align: center;
            max-width: 90%;
            opacity: 0;
            transition: all 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            border: 3px solid var(--primary-color);
        }

        .message.visible {
            display: block;
            opacity: 1;
            transform: translate(-50%, -50%) scale(1);
        }

        .message h2 {
            margin-top: 0;
            font-family: 'Courgette', cursive;
            color: var(--dark-accent);
            margin-bottom: 20px;
            font-size: 32px;
        }

        .message p {
            margin-bottom: 20px;
            line-height: 1.5;
        }

        .message .score-display {
            font-size: 28px;
            color: var(--dark-accent);
            margin: 20px 0;
            font-weight: bold;
        }

        .btn {
            padding: 10px 20px;
            font-family: 'Quicksand', sans-serif;
            font-weight: 600;
            font-size: 16px;
            color: white;
            background-color: var(--secondary-color);
            border: none;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            margin: 0 5px;
        }

        .btn:hover {
            background-color: var(--dark-accent);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn.reset-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 100;
        }

        .btn.hint-btn {
            position: absolute;
            top: 20px;
            right: 150px;
            z-index: 100;
            background-color: var(--primary-color);
        }

        .btn.hint-btn:hover {
            background-color: #c07f7f;
        }

        .sound-notif {
            position: fixed;
            bottom: 20px;
            left: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 18px;
            color: var(--secondary-color);
            opacity: 0;
            transition: all 0.5s ease;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(20px);
            border-left: 5px solid var(--primary-color);
            max-width: 300px;
        }

        .sound-notif.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .timer {
            position: absolute;
            top: 80px;
            right: 20px;
            font-size: 24px;
            color: var(--secondary-color);
            background-color: rgba(255, 255, 255, 0.85);
            padding: 10px 15px;
            border-radius: 10px;
            z-index: 100;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            font-weight: bold;
        }

        .timer::before {
            content: '⏱️';
            margin-right: 10px;
            font-size: 20px;
        }

        .score {
            position: absolute;
            top: 130px;
            right: 20px;
            font-size: 24px;
            color: var(--secondary-color);
            background-color: rgba(255, 255, 255, 0.85);
            padding: 10px 15px;
            border-radius: 10px;
            z-index: 100;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            font-weight: bold;
        }

        .score::before {
            content: '🏆';
            margin-right: 10px;
            font-size: 20px;
        }

        .hints-counter {
            position: absolute;
            top: 80px;
            right: 150px;
            font-size: 18px;
            color: var(--secondary-color);
            background-color: rgba(255, 255, 255, 0.85);
            padding: 5px 10px;
            border-radius: 10px;
            z-index: 100;
        }

        .star-rating {
            margin: 15px 0;
        }

        .star {
            font-size: 30px;
            color: #ccc;
            transition: all 0.3s ease;
            margin: 0 2px;
        }

        .star.active {
            color: var(--gold-color);
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        /* Animasyonlar */
        @keyframes glow {
            from {
                box-shadow: 0 0 30px 20px rgba(255, 255, 150, 0.3);
            }
            to {
                box-shadow: 0 0 30px 20px rgba(255, 255, 150, 0.7);
            }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        @keyframes celebrate {
            0% { transform: scale(1) rotate(0); }
            25% { transform: scale(1.1) rotate(-5deg); }
            50% { transform: scale(1.1) rotate(5deg); }
            75% { transform: scale(1.1) rotate(-5deg); }
            100% { transform: scale(1) rotate(0); }
        }

        @keyframes breathe {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }

        @keyframes cloudMove {
            0% { right: -60px; }
            100% { right: 160px; }
        }

        @keyframes sway {
            0% { transform: rotate(0deg); }
            50% { transform: rotate(5deg); }
            100% { transform: rotate(0deg); }
        }

        .glowing {
            animation: glow 1.5s infinite alternate;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .puzzle-panel {
                width: 280px;
                font-size: 16px;
            }
            
            .btn {
                padding: 8px 16px;
                font-size: 14px;
            }
            
            .btn.hint-btn {
                right: 120px;
            }
            
            .message h2 {
                font-size: 26px;
            }
            
            .cat {
                width: 100px;
                height: 80px;
            }
        }

        /* Yeni eklenen objeler için stiller */
        .toy-mouse {
            position: absolute;
            width: 40px;
            height: 25px;
            background-image: radial-gradient(ellipse at 70% 30%, #cccccc 0%, #999999 100%);
            border-radius: 20px 15px 15px 20px;
            bottom: 10%;
            left: 25%;
            cursor: pointer;
            z-index: 5;
            transition: all 0.3s ease;
        }
        
        .toy-mouse::before {
            content: '';
            position: absolute;
            width: 15px;
            height: 20px;
            background-color: #e0e0e0;
            border-radius: 50% 50% 0 0;
            top: -10px;
            left: 0;
            transform: rotate(-30deg);
        }
        
        .toy-mouse::after {
            content: '';
            position: absolute;
            width: 30px;
            height: 2px;
            background-color: #777;
            right: -25px;
            top: 50%;
            border-radius: 2px;
        }
        
        .toy-mouse:hover {
            transform: rotate(10deg) scale(1.1);
        }
        
        .food-bowl {
            position: absolute;
            width: 60px;
            height: 20px;
            background: radial-gradient(ellipse at center, #e08080, #8b5a5a);
            border-radius: 30px 30px 10px 10px;
            bottom: 2%;
            right: 30%;
            cursor: pointer;
            z-index: 5;
            overflow: hidden;
            transform: perspective(200px) rotateX(30deg);
        }
        
        .food {
            position: absolute;
            width: 90%;
            height: 4px;
            background: linear-gradient(to right, #d8a353, #f1c681);
            border-radius: 50%;
            bottom: 1px;
            left: 5%;
            transform-origin: center;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .yarn-ball {
            position: absolute;
            width: 40px;
            height: 40px;
            background: radial-gradient(circle at 30% 30%, #f1a7a7, #d38c8c);
            border-radius: 50%;
            bottom: 20%;
            left: 70%;
            cursor: pointer;
            z-index: 5;
            box-shadow: inset -5px -5px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        
        .yarn-ball::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background-image: 
                linear-gradient(90deg, transparent 45%, rgba(255,255,255,0.5) 48%, transparent 51%),
                linear-gradient(0deg, transparent 45%, rgba(255,255,255,0.5) 48%, transparent 51%);
            border-radius: 50%;
        }
        
        .yarn-ball:hover {
            transform: rotate(10deg) scale(1.1);
        }
        
        .sun-beam {
            position: absolute;
            width: 200px;
            height: 300px;
            background: linear-gradient(to bottom, rgba(255, 255, 200, 0.1), rgba(255, 255, 150, 0.2));
            transform: skew(-10deg);
            top: 0;
            left: 60%;
            z-index: 2;
            opacity: 0.7;
            pointer-events: none;
            display: none;
        }
        
        .mood-indicator {
            position: absolute;
            top: 20px;
            right: 90px;
            font-size: 32px;
            background-color: rgba(255, 255, 255, 0.85);
            padding: 10px;
            border-radius: 50%;
            z-index: 100;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1);
            transition: all 0.5s ease;
        }
        
        .mode-btn {
            position: absolute;
            top: 20px;
            right: 150px;
            z-index: 100;
            background-color: #765c9d;
        }
        
        .mode-btn:hover {
            background-color: #5b478c;
        }
        
        .night-mode {
            background: linear-gradient(to bottom, #2c3040, #3c3e52);
        }
        
        .night-mode .wall {
            background: linear-gradient(to bottom, #2c3040, #3c3e52);
        }
        
        .night-mode .floor {
            background: linear-gradient(to bottom, #232530, #1a1c25);
        }
        
        .night-mode .window {
            background: linear-gradient(to bottom, #101428, #1a203b);
        }
        
        .night-mode .lamp.glowing {
            box-shadow: 0 0 50px 30px rgba(255, 255, 150, 0.5);
        }
        
        .night-mode .puzzle-panel,
        .night-mode .timer,
        .night-mode .score,
        .night-mode .mood-indicator,
        .night-mode .sound-notif {
            background-color: rgba(50, 50, 70, 0.85);
            color: #e0e0e0;
        }
        
        @keyframes mouseMove {
            0% { transform: translateX(0) rotate(0); }
            25% { transform: translateX(20px) rotate(5deg); }
            50% { transform: translateX(0) rotate(0); }
            75% { transform: translateX(-20px) rotate(-5deg); }
            100% { transform: translateX(0) rotate(0); }
        }
        
        @keyframes yarnRoll {
            0% { transform: translate(0, 0) rotate(0); }
            20% { transform: translate(30px, 10px) rotate(72deg); }
            40% { transform: translate(0, 20px) rotate(144deg); }
            60% { transform: translate(-30px, 10px) rotate(216deg); }
            80% { transform: translate(0, 0) rotate(288deg); }
            100% { transform: translate(0, 0) rotate(360deg); }
        }

        .catnip {
            position: absolute;
            width: 40px;  /* 30px'den 40px'e büyüttüm */
            height: 40px; /* 30px'den 40px'e büyüttüm */
            background: radial-gradient(circle at center, #8cd98c, #4ca64c);
            border-radius: 50% 50% 5px 5px;
            bottom: 5%;
            left: 15%;
            cursor: pointer;
            z-index: 15; /* z-index değerini 5'ten 15'e yükselttim */
            opacity: 1;  /* 0.8'den 1'e yükselttim */
            box-shadow: 0 3px 10px rgba(0,0,0,0.5); /* Gölgeyi daha belirgin yaptım */
            display: none;
            transition: transform 0.3s ease;
            animation: pulse 1.5s infinite;
        }

        .catnip:hover {
            transform: scale(1.2);
            filter: brightness(1.2);
        }
        
        .catnip::before {
            content: '';
            position: absolute;
            width: 60%;
            height: 70%;
            background: linear-gradient(to bottom, transparent, #4ca64c);
            top: -10px;
            left: 20%;
            border-radius: 50% 50% 0 0;
        }
        
        .hidden-key {
            position: absolute;
            width: 20px;
            height: 40px;
            background: #d4af37;
            top: 45%;
            left: 10%;
            transform: rotate(30deg);
            cursor: pointer;
            z-index: 3;
            opacity: 0;
            transition: all 0.5s ease;
        }
        
        .hidden-key::before {
            content: '';
            position: absolute;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: #d4af37;
            top: 0;
            left: 4px;
        }
        
        .hidden-key::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 5px;
            background: #d4af37;
            bottom: 5px;
            left: 5px;
        }
        
        .mystery-box {
            position: absolute;
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #b38a4d, #8c6239);
            border: 3px solid #614023;
            bottom: 5%;
            right: 10%;
            cursor: pointer;
            z-index: 5;
            display: none;
        }
        
        .mystery-box::before {
            content: '?';
            position: absolute;
            font-size: 30px;
            color: rgba(255, 255, 255, 0.8);
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .cat-hidden {
            top: 40%;
            left: 15%;
            transform: scale(0.5);
            opacity: 0;
        }
        
        .tasks-container {
            margin-top: 15px;
            margin-bottom: 15px;
            max-height: 150px;
            overflow-y: auto;
        }
        
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .task-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 16px;
            color: var(--secondary-color);
            transition: all 0.3s ease;
            padding: 5px;
            border-radius: 5px;
        }
        
        .task-item.completed {
            color: #4a7c59;
            background-color: rgba(74, 124, 89, 0.1);
        }
        
        .task-item.completed .task-checkbox {
            content: '✓';
        }
        
        .task-checkbox {
            font-size: 20px;
            line-height: 1;
        }
        
        .timer-container {
            margin-top: 10px;
            font-size: 20px;
            font-weight: bold;
            color: var(--dark-accent);
        }
        
        .how-to-play {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            z-index: 200;
            max-width: 500px;
            width: 90%;
            text-align: left;
            border: 3px solid var(--primary-color);
        }
        
        .how-to-play h2 {
            margin-top: 0;
            font-family: 'Courgette', cursive;
            color: var(--dark-accent);
            margin-bottom: 20px;
            font-size: 32px;
            text-align: center;
        }
        
        .how-to-play-content {
            margin-bottom: 20px;
            line-height: 1.6;
        }
        
        .how-to-play-content ol {
            padding-left: 20px;
            margin: 15px 0;
        }
        
        .how-to-play-content li {
            margin-bottom: 10px;
        }
        
        .clue-notif {
            position: fixed;
            bottom: 70px;
            left: 20px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 15px 20px;
            border-radius: 10px;
            font-size: 18px;
            color: var(--secondary-color);
            opacity: 0;
            transition: all 0.5s ease;
            z-index: 1000;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transform: translateY(20px);
            border-left: 5px solid #6b8e23;
            max-width: 300px;
        }
        
        .clue-notif.visible {
            opacity: 1;
            transform: translateY(0);
        }
        
        .help-btn {
            position: absolute;
            top: 20px;
            right: 240px;
            z-index: 100;
            background-color: #4a7c59;
        }
        
        .help-btn:hover {
            background-color: #3a6149;
        }
        
        .game-controls {
            position: absolute;
            top: 0;
            right: 0;
            z-index: 100;
        }
    </style>
</head>
<body>
    <div class="room">
        <div class="wall"></div>
        <div class="wall-pattern"></div>
        <div class="floor"></div>
        <div class="carpet"></div>
        
        <div class="window">
            <div class="window-frame"></div>
            <div class="cloud"></div>
            <div class="cloud"></div>
            <div class="cloud"></div>
        </div>
        
        <div class="picture-frame"></div>
        
        <div class="bookshelf">
            <div class="shelf"></div>
            <div class="shelf"></div>
            <div class="shelf"></div>
            <div class="book"></div>
            <div class="book"></div>
            <div class="book"></div>
            <div class="book"></div>
            <div class="book"></div>
            <div class="book"></div>
            <div class="book"></div>
            <div class="book"></div>
            <div class="book"></div>
            <div class="book"></div>
            <div class="book"></div>
        </div>
        
        <div class="lamp" id="lamp">
            <div class="lamp-base"></div>
            <div class="lamp-wire"></div>
        </div>
        
        <div class="table">
            <div class="table-leg left"></div>
            <div class="table-leg right"></div>
            <div class="table-cloth"></div>
        </div>
        
        <div class="vase" id="vase"></div>
        <div class="flowers" id="flowers">
            <div class="flower"><div class="stem"></div></div>
            <div class="flower"><div class="stem"></div></div>
            <div class="flower"><div class="stem"></div></div>
            <div class="flower"><div class="stem"></div></div>
            <div class="flower"><div class="stem"></div></div>
        </div>
        
        <!-- Yeni Eklenen Objeler -->
        <div class="toy-mouse" id="toy-mouse"></div>
        <div class="food-bowl" id="food-bowl">
            <div class="food" id="food"></div>
        </div>
        <div class="yarn-ball" id="yarn-ball"></div>
        <div class="sun-beam" id="sun-beam"></div>
        <div class="catnip" id="catnip"></div>
        <div class="hidden-key" id="hidden-key"></div>
        <div class="mystery-box" id="mystery-box"></div>
        
        <!-- Kediler -->
        <div class="cat cat-main" id="cat-main"></div>
        <div class="cat-shadow"></div>
        <div class="cat cat-sleeping" id="cat-sleeping"></div>
        <div class="cat-shadow"></div>
        <div class="cat cat-window" id="cat-window"></div>
        <div class="cat-shadow"></div>
        <div class="cat cat-jumping" id="cat-jumping"></div>
        <div class="cat-shadow"></div>
        <div class="cat cat-hidden" id="cat-hidden"></div>
        <div class="cat-shadow"></div>
        
        <div class="puzzle-panel" id="puzzle-panel">
            <div class="puzzle-title">Kedi Bakıcısı</div>
            <div class="puzzle-clue" id="puzzle-clue">Odadaki eşyalara tıklayarak kedileri mutlu et!</div>
            <div id="puzzle-task">Tüm görevleri tamamla!</div>
            
            <div class="tasks-container">
                <div class="task-list">
                    <div class="task-item" id="task1">
                        <span class="task-checkbox">☐</span>
                        <span class="task-text">Lambayı yak ve kedileri çağır</span>
                    </div>
                    <div class="task-item" id="task2">
                        <span class="task-checkbox">☐</span>
                        <span class="task-text">Vazodan çiçekleri çıkar</span>
                    </div>
                    <div class="task-item" id="task3">
                        <span class="task-checkbox">☐</span>
                        <span class="task-text">Kedilere mama ver</span>
                    </div>
                    <div class="task-item" id="task4">
                        <span class="task-checkbox">☐</span>
                        <span class="task-text">Oyuncaklarla kedileri oynat</span>
                    </div>
                    <div class="task-item" id="task5">
                        <span class="task-checkbox">☐</span>
                        <span class="task-text">Gizli kediyi bul</span>
                    </div>
                </div>
            </div>
            
            <div class="timer-container">
                <span id="time-label">Süre: </span>
                <span id="time-value">03:00</span>
            </div>
        </div>
        
        <div class="message" id="message">
            <h2>Tebrikler!</h2>
            <p>Tüm görevleri tamamladın!</p>
            <div class="star-rating" id="star-rating">
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
                <span class="star">★</span>
            </div>
            <div class="score-display" id="final-score">Miyav: 0</div>
            <button class="btn" id="play-again-btn">Tekrar Oyna</button>
        </div>
        
        <!-- Nasıl Oynanır Paneli -->
        <div class="how-to-play" id="how-to-play">
            <h2>Nasıl Oynanır</h2>
            <div class="how-to-play-content">
                <p><strong>Hedef:</strong> Tüm görevleri tamamlayarak kedileri mutlu et!</p>
                <ol>
                    <li>Tavandaki <strong>lambaya tıkla</strong> ve kedileri çağır</li>
                    <li><strong>Vazoya tıkla</strong> ve çiçekleri açtır</li>
                    <li><strong>Mama kabına tıkla</strong> ve kedileri besle</li>
                    <li><strong>Oyuncak fare</strong> ve <strong>yün yumağı</strong> ile kedileri oynat</li>
                    <li><strong>Gizli kediyi</strong> bulmak için ipuçlarını takip et</li>
                </ol>
                <p><strong>İpucu:</strong> Her eşyanın kendine özgü bir etkisi var. Tüm odayı keşfet!</p>
                <p><strong>Zorluk:</strong> Tüm görevleri <span id="time-limit">3 dakika</span> içinde tamamlamalısın!</p>
            </div>
            <button class="btn" id="start-game-btn">Oyunu Başlat</button>
        </div>

        <div class="game-controls">
            <div class="timer" id="timer">Kedi Bakıcısı</div>
            <div class="score" id="score">Miyav: 0</div>
            <div class="mood-indicator" id="moodIndicator">😺</div>
            
            <button class="btn reset-btn" id="resetBtn">Yenile</button>
            <button class="btn mode-btn" id="dayNightBtn">🌙 Gece Modu</button>
            <button class="btn help-btn" id="helpBtn">❓ Yardım</button>
        </div>
        
        <div class="sound-notif" id="soundNotif">Miyav!</div>
        <div class="clue-notif" id="clueNotif">İpucu: Kitaplığa dikkatli bak!</div>
    </div>

    <script>
        // Ana değişkenler
        let currentScore = 0;
        let gameActive = false;
        let soundsPlayed = 0;
        let catMood = 3; // 1-5 arası (1: mutsuz, 5: çok mutlu)
        let isNightMode = false;
        let gameStarted = false;
        let gamePaused = false;
        let gameTimer = null;
        let remainingTime = 180; // 3 dakika (saniye cinsinden)
        let tasksCompleted = 0;
        let foundHiddenKey = false;
        
        // Görev durumları
        const tasks = {
            task1: { completed: false, id: 'task1', description: 'Lambayı yak ve kedileri çağır' },
            task2: { completed: false, id: 'task2', description: 'Vazodan çiçekleri çıkar' },
            task3: { completed: false, id: 'task3', description: 'Kedilere mama ver' },
            task4: { completed: false, id: 'task4', description: 'Oyuncaklarla kedileri oynat' },
            task5: { completed: false, id: 'task5', description: 'Gizli kediyi bul' }
        };
        
        // DOM Elementleri
        const lampEl = document.getElementById('lamp');
        const vaseEl = document.getElementById('vase');
        const flowersEl = document.getElementById('flowers');
        const catMainEl = document.getElementById('cat-main');
        const catSleepingEl = document.getElementById('cat-sleeping');
        const catWindowEl = document.getElementById('cat-window');
        const catJumpingEl = document.getElementById('cat-jumping');
        const catHiddenEl = document.getElementById('cat-hidden');
        const puzzleClueEl = document.getElementById('puzzle-clue');
        const puzzleTaskEl = document.getElementById('puzzle-task');
        const messageEl = document.getElementById('message');
        const resetBtn = document.getElementById('resetBtn');
        const soundNotifEl = document.getElementById('soundNotif');
        const clueNotifEl = document.getElementById('clueNotif');
        const timerEl = document.getElementById('timer');
        const timeValueEl = document.getElementById('time-value');
        const scoreEl = document.getElementById('score');
        const puzzlePanelEl = document.getElementById('puzzle-panel');
        const howToPlayEl = document.getElementById('how-to-play');
        const startGameBtn = document.getElementById('start-game-btn');
        const helpBtn = document.getElementById('helpBtn');
        const bookshelEl = document.querySelector('.bookshelf');
        const windowEl = document.querySelector('.window');
        const tableEl = document.querySelector('.table');
        const carpetEl = document.querySelector('.carpet');
        const pictureEl = document.querySelector('.picture-frame');
        const roomEl = document.querySelector('.room');
        const moodIndicatorEl = document.getElementById('moodIndicator');
        const dayNightBtn = document.getElementById('dayNightBtn');
        
        // Yeni Elementler
        const toyMouseEl = document.getElementById('toy-mouse');
        const foodBowlEl = document.getElementById('food-bowl');
        const foodEl = document.getElementById('food');
        const yarnBallEl = document.getElementById('yarn-ball');
        const sunBeamEl = document.getElementById('sun-beam');
        const catnipEl = document.getElementById('catnip');
        const hiddenKeyEl = document.getElementById('hidden-key');
        const mysteryBoxEl = document.getElementById('mystery-box');
        
        // Tüm kedilerin listesi
        const cats = [catMainEl, catSleepingEl, catWindowEl, catJumpingEl, catHiddenEl];
        
        // Kedi sesi
        let catSound;
        
        // Ses çal
        function playCatSound(type) {
            try {
                const catSoundCopy = new Audio('kedises.wav');
                
                // Ses seviyesini düşürelim - genel ses seviyesi %20'ye düşürüldü
                catSoundCopy.volume = 0.2;
                
                // Ses tipine göre ayarlamalar
                switch(type) {
                    case "normal":
                        // catSoundCopy.volume = 0.8;
                        catSoundCopy.playbackRate = 1;
                        break;
                    case "sleepy":
                        // catSoundCopy.volume = 0.5;
                        catSoundCopy.playbackRate = 0.7;
                        break;
                    case "curious":
                        // catSoundCopy.volume = 0.7;
                        catSoundCopy.playbackRate = 1.2;
                        break;
                    case "playful":
                        // catSoundCopy.volume = 0.9;
                        catSoundCopy.playbackRate = 1.3;
                        break;
                    case "loud":
                        // catSoundCopy.volume = 1;
                        catSoundCopy.playbackRate = 1.5;
                        break;
                    case "sad":
                        // catSoundCopy.volume = 0.8;
                        catSoundCopy.playbackRate = 0.8;
                        break;
                }
                
                catSoundCopy.play().catch(error => {
                    console.log("Ses çalınamadı:", error);
                });
            } catch (error) {
                console.error("Ses dosyası yüklenirken hata oluştu:", error);
            }
        }
        
        // Sayfa yüklendiğinde
        window.addEventListener('load', init);
        
        // Oyunu başlat
        function init() {
            console.log("Oyun başlatılıyor...");
            
            // DOM elementlerinin varlığını kontrol et, eğer yoksa hata verme
            if (howToPlayEl) {
                howToPlayEl.style.display = 'block';
            } else {
                console.error("'how-to-play' ID'li element bulunamadı");
            }
            
            if (puzzlePanelEl) {
                puzzlePanelEl.style.display = 'none';
            } else {
                console.error("'puzzle-panel' ID'li element bulunamadı");
            }
            
            // Başlatma butonu için dinleyici ekle
            if (startGameBtn) {
                startGameBtn.addEventListener('click', startGame);
            } else {
                console.error("'start-game-btn' ID'li element bulunamadı");
            }
            
            // Yardım butonu için dinleyici
            if (helpBtn) {
                helpBtn.addEventListener('click', showHelp);
            } else {
                console.error("'helpBtn' ID'li element bulunamadı");
            }
            
            // Reset butonu
            if (resetBtn) {
                resetBtn.addEventListener('click', resetGame);
            } else {
                console.error("'resetBtn' ID'li element bulunamadı");
            }
            
            // Tekrar oyna butonu
            const playAgainBtn = document.getElementById('play-again-btn');
            if (playAgainBtn) {
                playAgainBtn.addEventListener('click', resetGame);
            } else {
                console.error("'play-again-btn' ID'li element bulunamadı");
            }
            
            try {
                // Ses dosyasını önceden yükle
                catSound = new Audio('kedises.wav');
                catSound.preload = 'auto';
                // Diğer elementlerin olay dinleyicilerini ayarla
                setupEventListeners();
            } catch (error) {
                console.error("Ses dosyası yüklenirken bir hata oluştu:", error);
                // Ses hatası olsa bile oyunu başlat
                setupEventListeners();
            }
        }
        
        // Olay dinleyicilerini ayarla
        function setupEventListeners() {
            // Lamba tıklama olayı
            lampEl.addEventListener('click', () => {
                if (!gameStarted) return;
                
                if (lampEl.classList.contains('glowing')) {
                    lampEl.classList.remove('glowing');
                    showSoundNotif("Işıklar kapatıldı, kediler saklanıyor!");
                    hideAllCats();
                    updateMood(-1);
                } else {
                    lampEl.classList.add('glowing');
                    showSoundNotif("Işıklar açıldı, kediler ortaya çıkıyor!");
                    showAllCats();
                    increaseSoundCounter();
                    playCatSound("normal");
                    updateMood(1);
                    
                    // Lamba görevini tamamla
                    completeTask('task1');
                }
            });
            
            // Vazo tıklama olayı
            vaseEl.addEventListener('click', () => {
                if (!gameStarted) return;
                
                if (flowersEl.style.opacity === '1') {
                    flowersEl.style.opacity = '0';
                    showSoundNotif("Çiçekleri vazoya koydun!");
                } else {
                    flowersEl.style.opacity = '1';
                    showSoundNotif("Vazodan çiçekler açtı!");
                    playCatSound("curious");
                    increaseSoundCounter();
                    updateMood(1);
                    
                    // Vazo görevini tamamla
                    completeTask('task2');
                }
                
                // Vazoyu sallandır
                vaseEl.style.transform = 'translateX(calc(-50% + 5px))';
                setTimeout(() => {
                    vaseEl.style.transform = 'translateX(calc(-50% - 5px))';
                    setTimeout(() => {
                        vaseEl.style.transform = 'translateX(-50%)';
                    }, 100);
                }, 100);
            });
            
            // Kediler için tıklama olayları
            cats.forEach(cat => {
                cat.addEventListener('click', () => {
                    if (!gameStarted) return;
                    
                    playCatSound("playful");
                    cat.classList.add('found');
                    increaseSoundCounter();
                    updateMood(1);
                    
                    setTimeout(() => {
                        cat.classList.remove('found');
                    }, 2000);
                    
                    // Gizli kedi tıklandığında
                    if (cat.id === 'cat-hidden' && cat.style.opacity !== '0') {
                        showSoundNotif("Gizli kediyi buldun! Miyaaaav!");
                        completeTask('task5');
                        
                        // Kutlama efekti
                        cat.style.animation = 'celebrate 1s ease-in-out';
                        setTimeout(() => {
                            cat.style.animation = '';
                        }, 1000);
                    } else {
                        showSoundNotif("Miyav! Kedi sevinçle miyavladı!");
                    }
                });
            });
            
            // Kitaplık tıklama olayı
            bookshelEl.addEventListener('click', () => {
                if (!gameStarted) return;
                
                showSoundNotif("Kitaplar... Bazıları kediler hakkında!");
                // Kitapları sallandır
                const books = document.querySelectorAll('.book');
                books.forEach(book => {
                    const randomDelay = Math.random() * 0.5;
                    book.style.animation = `sway 2s ease-in-out ${randomDelay}s`;
                    setTimeout(() => {
                        book.style.animation = '';
                    }, 2000 + (randomDelay * 1000));
                });
                
                // Belirli bir olasılıkla kitaplıkta gizli anahtarı göster
                if (!foundHiddenKey && Math.random() > 0.4) {
                    showClueNotif("Kitapların arasında bir şey parladı!");
                    hiddenKeyEl.style.opacity = '1';
                }
            });
            
            // Gizli anahtar tıklama olayı
            hiddenKeyEl.addEventListener('click', () => {
                if (!gameStarted) return;
                
                hiddenKeyEl.style.opacity = '0';
                foundHiddenKey = true;
                showClueNotif("Bir anahtar buldun! Bu ne açabilir?");
                
                // Gizemli kutuyu göster
                setTimeout(() => {
                    mysteryBoxEl.style.display = 'block';
                    showClueNotif("Odanın köşesinde gizemli bir kutu belirdi!");
                }, 1000);
            });
            
            // Gizemli kutu tıklama olayı
            mysteryBoxEl.addEventListener('click', () => {
                if (!gameStarted) return;
                
                if (foundHiddenKey) {
                    showClueNotif("Kutuyu açtın! İçinden kedi nanesi çıktı!");
                    mysteryBoxEl.style.display = 'none';
                    catnipEl.style.display = 'block';
                } else {
                    showClueNotif("Bu kutuyu açmak için bir anahtar lazım.");
                }
            });
            
            // Kedi nanesi tıklama olayı
            catnipEl.addEventListener('click', function(event) {
                event.stopPropagation(); // Event'in yayılmasını engelle
                
                if (!gameStarted) return;
                
                console.log("Kedi nanesine tıklandı!"); // Konsola log ekle
                showClueNotif("Kedi nanesi! Gizli kedi bunu çok sever.");
                catnipEl.style.animation = 'pulse 1s infinite';
                catnipEl.style.backgroundColor = '#ff0000'; // Rengini değiştir - tıklandığını göstermek için
                
                // Görsel geri bildirim
                catnipEl.style.transform = 'scale(1.5)';
                setTimeout(() => {
                    catnipEl.style.transform = 'scale(1)';
                }, 200);
                
                // Gizli kediyi göster
                setTimeout(() => {
                    catHiddenEl.style.opacity = '0.8';
                    catHiddenEl.style.zIndex = '20'; // Zindex'i artırma
                    showClueNotif("Bir kedi miyavlaması duydun! Odada bir yerde saklanıyor olmalı.");
                    
                    // Kedi'nin konumunu işaretle
                    const marker = document.createElement('div');
                    marker.style.position = 'absolute';
                    marker.style.width = '30px';
                    marker.style.height = '30px';
                    marker.style.backgroundColor = 'rgba(255, 0, 0, 0.3)';
                    marker.style.borderRadius = '50%';
                    marker.style.top = '40%';
                    marker.style.left = '15%';
                    marker.style.animation = 'pulse 1s infinite';
                    marker.style.zIndex = '19';
                    document.querySelector('.room').appendChild(marker);
                    
                    // Kediyi daha belirgin yap
                    catHiddenEl.style.filter = 'brightness(1.2) contrast(1.2) saturate(1.5)';
                    
                    setTimeout(() => {
                        if (marker) marker.remove();
                    }, 5000);
                }, 1000);
            });
            
            // Pencere tıklama olayı
            windowEl.addEventListener('click', () => {
                if (!gameStarted) return;
                
                showSoundNotif("Pencereden dışarısı çok güzel görünüyor!");
                // Bulutları hızlandır
                const clouds = document.querySelectorAll('.cloud');
                clouds.forEach(cloud => {
                    cloud.style.animationDuration = '10s';
                    setTimeout(() => {
                        cloud.style.animationDuration = '30s';
                    }, 3000);
                });
                
                // Güneş ışığını aç/kapat
                if (sunBeamEl.style.display === 'block') {
                    sunBeamEl.style.display = 'none';
                } else if (!isNightMode) {
                    sunBeamEl.style.display = 'block';
                    updateMood(1);
                }
                
                // Pencere kedisini göster
                catWindowEl.classList.add('visible');
                playCatSound("curious");
                increaseSoundCounter();
                
                setTimeout(() => {
                    if (Math.random() > 0.5) {
                        catWindowEl.classList.remove('visible');
                    }
                }, 4000);
            });
            
            // Masa tıklama olayı
            tableEl.addEventListener('click', () => {
                if (!gameStarted) return;
                
                showSoundNotif("Masanın üzerinde bir şeyler var...");
                
                // Uyuyan kediyi göster/gizle
                if (catSleepingEl.classList.contains('visible')) {
                    catSleepingEl.classList.remove('visible');
                    showSoundNotif("Kedi masadan aşağı atladı!");
                } else {
                    catSleepingEl.classList.add('visible');
                    playCatSound("sleepy");
                    increaseSoundCounter();
                    showSoundNotif("Bir kedi masanın üzerine zıpladı!");
                }
            });
            
            // Halı tıklama olayı
            carpetEl.addEventListener('click', () => {
                if (!gameStarted) return;
                
                showSoundNotif("Halı çok yumuşak görünüyor!");
                
                // Zıplayan kediyi göster
                catJumpingEl.classList.add('visible');
                playCatSound("playful");
                increaseSoundCounter();
                
                // Halıya animasyon ekle
                carpetEl.style.transform = 'scale(1.05)';
                setTimeout(() => {
                    carpetEl.style.transform = 'scale(1)';
                }, 300);
                
                setTimeout(() => {
                    if (Math.random() > 0.3) {
                        catJumpingEl.classList.remove('visible');
                    }
                }, 3000);
            });
            
            // Resim çerçevesi tıklama olayı
            pictureEl.addEventListener('click', () => {
                if (!gameStarted) return;
                
                showSoundNotif("Bu resimde bir kedi var!");
                
                // Resmi döndür
                pictureEl.style.transform = pictureEl.style.transform === 'rotate(5deg)' ? 
                    'rotate(-5deg)' : 'rotate(5deg)';
                
                // Ana kediyi göster
                catMainEl.classList.add('visible');
                playCatSound("normal");
                increaseSoundCounter();
            });
            
            // Gece/Gündüz modu değiştirme
            dayNightBtn.addEventListener('click', () => {
                if (!gameStarted) return;
                
                if (isNightMode) {
                    // Gündüz moduna geç
                    roomEl.classList.remove('night-mode');
                    dayNightBtn.textContent = "🌙 Gece Modu";
                    sunBeamEl.style.opacity = '0.7';
                    isNightMode = false;
                    showSoundNotif("Günaydın! Gündüz moduna geçildi.");
                } else {
                    // Gece moduna geç
                    roomEl.classList.add('night-mode');
                    dayNightBtn.textContent = "☀️ Gündüz Modu";
                    sunBeamEl.style.display = 'none';
                    isNightMode = true;
                    showSoundNotif("İyi geceler! Gece moduna geçildi.");
                    
                    // Gece modunda kedileri sakla
                    if (!lampEl.classList.contains('glowing')) {
                        hideAllCats();
                    }
                }
            });
            
            // Yeni Oyuncak fare olayı
            toyMouseEl.addEventListener('click', () => {
                if (!gameStarted) return;
                
                toyMouseEl.style.animation = 'mouseMove 2s ease-in-out';
                
                // Rastgele bir kediyi fare ile oynamaya getir
                const randomCat = cats[Math.floor(Math.random() * (cats.length - 1))]; // Gizli kediyi hariç tut
                randomCat.classList.add('visible');
                randomCat.style.transform = 'scale(0.9) translateY(-10px)';
                
                playCatSound("playful");
                increaseSoundCounter();
                updateMood(2); // Oyuncaklar kedileri çok mutlu eder
                
                showSoundNotif("Fareyle oynamak kediyi çok mutlu etti!");
                
                setTimeout(() => {
                    toyMouseEl.style.animation = '';
                    randomCat.style.transform = '';
                }, 2000);
                
                // Oyuncak fare görevini tamamla
                updatePlayToysTask();
            });
            
            // Yün yumağı olayı
            yarnBallEl.addEventListener('click', () => {
                if (!gameStarted) return;
                
                yarnBallEl.style.animation = 'yarnRoll 3s ease-in-out';
                
                // En yakın kediyi yumağa doğru getir
                const catJumpingEl = document.getElementById('cat-jumping');
                catJumpingEl.classList.add('visible');
                catJumpingEl.style.transform = 'scale(0.8) rotate(15deg)';
                catJumpingEl.style.left = '65%';
                
                playCatSound("playful");
                increaseSoundCounter();
                updateMood(1);
                
                showSoundNotif("Kedi yumakla oynamaktan keyif alıyor!");
                
                setTimeout(() => {
                    yarnBallEl.style.animation = '';
                    catJumpingEl.style.transform = 'scale(0.7) rotate(-15deg)';
                    catJumpingEl.style.left = '70%';
                }, 3000);
            });
            
            // Mama kabı olayı
            foodBowlEl.addEventListener('click', () => {
                if (!gameStarted) return;
                
                if (foodEl.style.opacity === '1') {
                    showSoundNotif("Kediler doydu, biraz dinlenmeliler...");
                    foodEl.style.opacity = '0';
                    
                    // Kedileri dinlenmeye gönder
                    cats.forEach(cat => {
                        if (cat.classList.contains('visible')) {
                            cat.style.filter = 'brightness(0.7) contrast(0.9) blur(0px)';
                        }
                    });
                } else {
                    showSoundNotif("Kedi maması koydun! Kediler aç olmalı...");
                    foodEl.style.opacity = '1';
                    
                    // Uyuyan kediyi mama kabına getir
                    catMainEl.classList.add('visible');
                    catMainEl.style.filter = 'brightness(1) contrast(1) saturate(1.2) blur(0px)';
                    catMainEl.style.bottom = '3%';
                    catMainEl.style.right = '28%';
                    catMainEl.style.transform = 'scaleX(-1) scale(0.8)';
                    
                    playCatSound("normal");
                    increaseSoundCounter();
                    updateMood(2);
                    
                    // Mama verme görevini tamamla
                    completeTask('task3');
                    
                    setTimeout(() => {
                        catMainEl.style.bottom = '30%';
                        catMainEl.style.right = '20%';
                        catMainEl.style.transform = 'scaleX(-1)';
                    }, 5000);
                }
            });
        }
        
        // Görevi tamamla
        function completeTask(taskId) {
            if (tasks[taskId].completed) return;
            
            tasks[taskId].completed = true;
            const taskElement = document.getElementById(taskId);
            
            if (taskElement) {
                taskElement.classList.add('completed');
                taskElement.querySelector('.task-checkbox').textContent = '✓';
            }
            
            tasksCompleted++;
            showSoundNotif(`Görev tamamlandı: ${tasks[taskId].description}`);
            
            // Tüm görevler tamamlandıysa oyunu bitir
            if (tasksCompleted === Object.keys(tasks).length) {
                gameCompleted();
            }
        }
        
        // Oyuncaklarla oynama görevini güncelle
        function updatePlayToysTask() {
            // Hem fare hem de yumak en az bir kez kullanıldıysa görevi tamamla
            if (toyMouseEl.style.animation !== '' || yarnBallEl.style.animation !== '') {
                completeTask('task4');
            }
        }
        
        // Oyunu başlat
        function startGame() {
            // Nasıl oynanır ekranını gizle
            howToPlayEl.style.display = 'none';
            
            // Görev panelini göster
            puzzlePanelEl.style.display = 'block';
            
            // Oyunu aktifleştir
            gameStarted = true;
            
            // Zamanlayıcıyı başlat
            startTimer();
            
            // Başlangıç durumu
            resetRoom();
            
            showSoundNotif("Oyun başladı! Tüm görevleri tamamla!");
        }
        
        // Zamanlayıcıyı başlat
        function startTimer() {
            // Önceki zamanlayıcıyı temizle
            if (gameTimer) {
                clearInterval(gameTimer);
            }
            
            // Zamanı sıfırla
            remainingTime = 180; // 3 dakika
            updateTimerDisplay();
            
            // Yeni zamanlayıcıyı ayarla
            gameTimer = setInterval(() => {
                if (gamePaused) return;
                
                remainingTime--;
                updateTimerDisplay();
                
                // Zaman doldu mu kontrol et
                if (remainingTime <= 0) {
                    clearInterval(gameTimer);
                    gameOver();
                }
                
                // Son 30 saniye uyarısı
                if (remainingTime === 30) {
                    showClueNotif("Dikkat! Sadece 30 saniyen kaldı!");
                    // Zaman baskısı efekti
                    timeValueEl.style.color = 'red';
                    timeValueEl.style.animation = 'pulse 1s infinite';
                }
            }, 1000);
        }
        
        // Zamanlayıcı göstergesini güncelle
        function updateTimerDisplay() {
            const minutes = Math.floor(remainingTime / 60);
            const seconds = remainingTime % 60;
            timeValueEl.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Oyun tamamlandı
        function gameCompleted() {
            // Zamanlayıcıyı durdur
            clearInterval(gameTimer);
            
            // Tüm kedileri göster ve mutlu et
            showAllCats();
            cats.forEach(cat => {
                cat.classList.add('found');
            });
            
            // Çiçekleri göster
            flowersEl.style.opacity = '1';
            
            // Bitiş mesajını göster
            messageEl.querySelector('h2').textContent = "Harika iş!";
            messageEl.querySelector('p').textContent = "Tüm görevleri tamamladın ve kedileri mutlu ettin!";
            
            // Kalan süreye göre yıldız hesapla
            const timeBonus = Math.floor(remainingTime / 60) * 100; // Her dakika için 100 puan
            const totalScore = currentScore + timeBonus;
            messageEl.querySelector('#final-score').textContent = `Skor: ${totalScore} (${currentScore} + ${timeBonus} zaman bonusu)`;
            
            // Yıldız derecelendirmesi
            const stars = calculateStars();
            updateStars(stars);
            
            messageEl.classList.add('visible');
            
            // Bitiş sesi
            playCatSound("loud");
        }
        
        // Oyun bitti (süre doldu)
        function gameOver() {
            // Zamanlayıcıyı durdur
            clearInterval(gameTimer);
            
            // Bitiş mesajını göster
            messageEl.querySelector('h2').textContent = "Süre Doldu!";
            messageEl.querySelector('p').textContent = `${tasksCompleted} görevi tamamladın. Tekrar dene!`;
            messageEl.querySelector('#final-score').textContent = `Skor: ${currentScore}`;
            
            // Yıldız derecelendirmesi
            const stars = Math.min(tasksCompleted, 3);
            updateStars(stars);
            
            messageEl.classList.add('visible');
            
            // Üzgün ses
            playCatSound("sad");
        }
        
        // Yıldız derecelendirmesi hesapla
        function calculateStars() {
            // Tüm görevler tamamlandı
            if (tasksCompleted === Object.keys(tasks).length) {
                // Kalan süreye göre bonus
                if (remainingTime > 120) return 5; // 2+ dakika kaldıysa
                if (remainingTime > 60) return 4; // 1+ dakika kaldıysa
                return 3; // Süre az kaldıysa
            }
            
            // Kısmi tamamlama
            if (tasksCompleted >= 3) return 2;
            if (tasksCompleted >= 1) return 1;
            return 0;
        }
        
        // Yıldızları güncelle
        function updateStars(count) {
            const stars = document.querySelectorAll('.star');
            stars.forEach((star, index) => {
                star.classList.toggle('active', index < count);
            });
        }
        
        // Yardım göster
        function showHelp() {
            howToPlayEl.style.display = 'block';
            
            // Oyunu durdur
            gamePaused = true;
            
            // Başlatma butonu yerine devam et butonu göster
            startGameBtn.textContent = "Devam Et";
            startGameBtn.onclick = () => {
                howToPlayEl.style.display = 'none';
                gamePaused = false;
            };
        }
        
        // Duygu durumunu güncelle
        function updateMood(change) {
            catMood = Math.max(1, Math.min(5, catMood + change));
            
            // Duygu durumuna göre emojiyi güncelle
            switch(catMood) {
                case 1:
                    moodIndicatorEl.textContent = "😾"; // Mutsuz
                    break;
                case 2:
                    moodIndicatorEl.textContent = "🙀"; // Biraz huzursuz
                    break;
                case 3:
                    moodIndicatorEl.textContent = "😺"; // Normal
                    break;
                case 4:
                    moodIndicatorEl.textContent = "😸"; // Mutlu
                    break;
                case 5:
                    moodIndicatorEl.textContent = "😻"; // Çok mutlu
                    break;
            }
        }
        
        // Ses sayacını artır
        function increaseSoundCounter() {
            soundsPlayed++;
            currentScore += 10;
            updateScoreDisplay();
        }
        
        // Skor panelini güncelle
        function updateScoreDisplay() {
            document.querySelector('.score').textContent = currentScore;
            document.querySelector('.score').innerHTML = `Puan: ${currentScore}`;
        }
        
        // Tüm kedileri göster
        function showAllCats() {
            cats.forEach((cat, index) => {
                // Gizli kediyi gösterme (son kedi)
                if (index < cats.length - 1) {
                    cat.classList.add('visible');
                }
            });
        }
        
        // Tüm kedileri gizle
        function hideAllCats() {
            cats.forEach(cat => {
                cat.classList.remove('visible');
                cat.classList.remove('found');
            });
        }
        
        // Odayı sıfırla
        function resetRoom() {
            // Kedileri sıfırla
            hideAllCats();
            
            // Çiçekleri gizle
            flowersEl.style.opacity = '0';
            
            // Lambayı söndür
            lampEl.classList.remove('glowing');
            
            // Mesajı kaldır
            messageEl.classList.remove('visible');
            
            // Skor sayacını sıfırla
            currentScore = 0;
            updateScoreDisplay();
            
            // Duygu durumunu sıfırla
            catMood = 3;
            updateMood(0);
            
            // Oyuncak fare ve yün yumağı animasyonlarını sıfırla
            toyMouseEl.style.animation = '';
            yarnBallEl.style.animation = '';
            
            // Mama kabını boşalt
            foodEl.style.opacity = '0';
            
            // Güneş ışığını gizle
            sunBeamEl.style.display = 'none';
            
            // Kedilerin konumlarını sıfırla
            catMainEl.style.bottom = '30%';
            catMainEl.style.right = '20%';
            catMainEl.style.transform = 'scaleX(-1)';
            
            // Özel öğeleri sıfırla
            catnipEl.style.display = 'none';
            hiddenKeyEl.style.opacity = '0';
            mysteryBoxEl.style.display = 'none';
            
            // Görevleri sıfırla
            resetTasks();
            
            // Zamanlayıcıyı temizle ve sıfırla
            if (gameTimer) {
                clearInterval(gameTimer);
            }
            timeValueEl.style.color = '';
            timeValueEl.style.animation = '';
            
            showSoundNotif("Oda yenilendi!");
        }
        
        // Oyunu sıfırla
        function resetGame() {
            // Tüm oyun durumunu sıfırla
            resetRoom();
            
            // Tüm değişkenleri sıfırla
            gameStarted = false;
            gamePaused = false;
            tasksCompleted = 0;
            foundHiddenKey = false;
            soundsPlayed = 0;
            
            // Nasıl oynanır ekranını göster
            howToPlayEl.style.display = 'block';
            
            // Başlatma butonunu sıfırla
            startGameBtn.textContent = "Oyunu Başlat";
            startGameBtn.onclick = startGame;
            
            // Görev panelini gizle
            puzzlePanelEl.style.display = 'none';
            
            // Mesajı kaldır
            messageEl.classList.remove('visible');
        }
        
        // Görevleri sıfırla
        function resetTasks() {
            tasksCompleted = 0;
            
            // Tüm görevleri sıfırla
            Object.keys(tasks).forEach(taskId => {
                tasks[taskId].completed = false;
                const taskElement = document.getElementById(taskId);
                
                if (taskElement) {
                    taskElement.classList.remove('completed');
                    taskElement.querySelector('.task-checkbox').textContent = '☐';
                }
            });
        }
        
        // İpucu bildirimi göster
        function showClueNotif(text) {
            clueNotifEl.textContent = text;
            clueNotifEl.classList.add('visible');
            
            // Önceki zamanlayıcıyı temizle
            if (clueNotifEl.timeoutId) {
                clearTimeout(clueNotifEl.timeoutId);
            }
            
            // Yeni zamanlayıcı oluştur
            clueNotifEl.timeoutId = setTimeout(() => {
                clueNotifEl.classList.remove('visible');
            }, 5000);
        }
        
        // Ses bildirimi göster
        function showSoundNotif(text) {
            soundNotifEl.textContent = text;
            soundNotifEl.classList.add('visible');
            
            // Önceki zamanlayıcıyı temizle
            if (soundNotifEl.timeoutId) {
                clearTimeout(soundNotifEl.timeoutId);
            }
            
            // Yeni zamanlayıcı oluştur
            soundNotifEl.timeoutId = setTimeout(() => {
                soundNotifEl.classList.remove('visible');
            }, 3000);
        }
    </script>
</body>
</html>
